@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== Monochrome Tokens =====
   Default: DARK (hitam dominan)
   Notes:
   - Variabel ditempel pada wrapper .mono (pastikan elemen root kamu diberi class "mono").
   - Light mode opsional via .light .mono (atau abaikan dulu).
*/
.mono {
  --mono-bg: #0a0a0a;
  --mono-fg: #fafafa;
  --mono-border: #2a2a2a;
  --mono-overlay: rgba(255, 255, 255, 0.12);
  --mono-muted: rgba(255, 255, 255, 0.65);
  --mono-label: rgba(255, 255, 255, 0.7);
  --mono-ph: rgba(255, 255, 255, 0.45);
}

/* Light mode (opsional; diaktifkan jika wrapper punya class .light) */
.light .mono {
  --mono-bg: #ffffff;
  --mono-fg: #0a0a0a;
  --mono-border: #e5e5e5;
  --mono-overlay: rgba(0, 0, 0, 0.08);
  --mono-muted: rgba(0, 0, 0, 0.6);
  --mono-label: rgba(0, 0, 0, 0.7);
  --mono-ph: rgba(0, 0, 0, 0.4);
}

/* Kompatibilitas: jika project sudah menggunakan .dark pada <html>, tetap gelap */
.dark .mono {
  --mono-bg: #0a0a0a;
  --mono-fg: #fafafa;
  --mono-border: #2a2a2a;
  --mono-overlay: rgba(255, 255, 255, 0.12);
  --mono-muted: rgba(255, 255, 255, 0.65);
  --mono-label: rgba(255, 255, 255, 0.7);
  --mono-ph: rgba(255, 255, 255, 0.45);
}

/* Base semantics (hanya di dalam scope .mono) */
.mono a {
  color: inherit;
  text-decoration: none;
}
.mono :focus-visible {
  outline: 2px solid var(--mono-fg);
  outline-offset: 2px;
}

/* ===== Components Layer ===== */
@layer components {
  .btn {
    @apply inline-flex items-center justify-center rounded-none
           border bg-mono-fg text-mono-bg transition px-4 py-2 text-sm font-medium;
  }
  .btn:hover {
    @apply bg-mono-bg text-mono-fg;
  }

  .btn-ghost {
    @apply inline-flex items-center justify-center rounded-none
           border bg-mono-bg text-mono-fg transition px-4 py-2 text-sm font-medium;
  }
  .btn-ghost:hover {
    @apply bg-mono-fg text-mono-bg;
  }

  .btn-icon {
    @apply btn w-8 h-8 p-0;
  }
  .btn-icon-ghost {
    @apply btn-ghost w-8 h-8 p-0;
  }

  .label {
    @apply text-xs uppercase tracking-widest text-[var(--mono-label)];
  }

  .input {
    @apply w-full border bg-mono-bg px-3 py-2 rounded-none outline-none
           placeholder-[var(--mono-ph)] text-mono-fg;
  }

  .chip {
    @apply inline-flex items-center gap-1 border bg-mono-bg text-mono-fg
           px-2 py-0.5 text-[10px] uppercase tracking-widest;
  }

  .card {
    @apply bg-mono-bg border;
  }

  .modal-overlay {
    @apply fixed inset-0 z-50 grid place-items-center bg-[var(--mono-overlay)];
  }
  .modal {
    @apply relative w-[90%] md:w-[70%] lg:w-[60%] xl:w-[50%] 2xl:w-[40%]
           bg-mono-bg border;
  }
  .modal-header {
    @apply flex items-center justify-between px-4 py-3 border-b;
  }
  .modal-title {
    @apply text-sm font-semibold uppercase tracking-wider;
  }

  .table-row {
    @apply group text-sm;
  }
  .table-row-hover {
    @apply hover:bg-mono-fg hover:text-mono-bg;
  }

  /* Section/Card standar halaman */
  .section {
    @apply card p-4;
  }

  /* Field helpers */
  .field-label {
    @apply label;
  }
  .field-note {
    @apply text-[10px] text-mono-muted mt-1;
  }
  .field-readonly {
    @apply bg-black/5;
  }

  /* Badge ringan */
  .badge {
    @apply px-2 py-0.5 text-[10px] border bg-mono-bg;
  }

  /* Table row hover aliases */
  .row-hover {
    @apply hover:bg-mono-fg hover:text-mono-bg;
  }
  .row-hover-sync {
    @apply group-hover:bg-mono-bg group-hover:text-mono-fg;
  }
}

/* ===== Utilities Layer ===== */
@layer utilities {
  .row-hover-invert {
    @apply group-hover:bg-mono-bg group-hover:text-mono-fg;
  }
  .row-hover-icon {
    @apply group-hover:text-mono-fg;
  }
}

/* ===== 3rd-party Widgets ===== */

/* react-calendar */
.react-calendar {
  width: 100% !important;
  background: var(--mono-bg) !important;
  color: var(--mono-fg) !important;
}
.react-calendar__navigation__label__labelText {
  font-weight: 600;
}
.react-calendar__tile--active {
  background-color: var(--mono-fg) !important;
  color: var(--mono-bg) !important;
}

/* react-big-calendar */
.rbc-toolbar {
  @apply border-b;
}
.rbc-toolbar-label {
  text-align: right !important;
  padding: 0 20px !important;
}
.rbc-btn-group button {
  @apply border bg-mono-bg text-mono-fg;
}
.rbc-btn-group .rbc-active {
  @apply bg-mono-fg text-mono-bg;
}
.rbc-time-view,
.rbc-time-content,
.rbc-month-view {
  border-color: var(--mono-border) !important;
}
.rbc-time-header {
  display: none !important;
}
.rbc-time-gutter.rbc-time-column {
  font-size: 12px !important;
}
.rbc-timeslot-group {
  background-color: var(--mono-bg) !important;
}
.rbc-event {
  border: 1px solid var(--mono-border) !important;
  background: var(--mono-bg) !important;
  color: var(--mono-fg) !important;
  padding: 8px !important;
  margin: 8px !important;
  width: 99% !important;
}
.rbc-event-label {
  color: var(--mono-muted) !important;
  margin-bottom: 4px;
}

/* ===== Modal form field contrast (override) ===== */
.modal-body {
  /* Field di modal sedikit lebih terang dari latar global */
  --modal-field-bg: #111; /* ganti #111 -> #121212/#131313 sesuai selera */
  --modal-field-bd: var(--mono-border);
  --modal-field-fg: var(--mono-fg);
  --modal-ph-strong: color-mix(in oklab, var(--mono-ph), white 20%);
}

.modal-body .input,
.modal-body select,
.modal-body textarea {
  background-color: var(--modal-field-bg) !important;
  color: var(--modal-field-fg) !important;
  border-color: var(--modal-field-bd) !important;
}

.modal-body .input::placeholder,
.modal-body textarea::placeholder {
  color: var(--modal-ph-strong);
}

/* Samakan tinggi kontrol supaya rapi di modal */
.modal-body select.input,
.modal-body select {
  height: 2.25rem; /* h-9 */
}

/* Label & helper text tetap kontras */
.modal-body .label {
  color: var(--mono-label);
}
.modal-body .field-note {
  color: var(--mono-muted);
}
